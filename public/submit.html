<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Submit Review</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <style>
    body{font-family:Arial,Helvetica,sans-serif;padding:20px;max-width:720px;margin:auto}
    label{display:block;margin-top:12px}
    input,textarea,select{width:100%;padding:8px;margin-top:6px;border:1px solid #ccc;border-radius:6px}
    button{margin-top:12px;padding:10px 16px;border:none;background:#0a6cff;color:#fff;border-radius:6px;cursor:pointer}
    .msg{margin-top:12px}
    
  </style>
</head>
<body>
  <h2>Submit your Fan Review</h2>
  <p>Share a photo of your jersey and your review. Reviews are published after approval.</p>

  <form id="reviewForm" enctype="multipart/form-data">
    <label>Your name <input name="name" required /></label>
    <label>City (optional) <input name="city" /></label>
    <label>Rating <select name="rating">
      <option value="5">5 - Excellent</option>
      <option value="4">4 - Very good</option>
      <option value="3">3 - Good</option>
      <option value="2">2 - Fair</option>
      <option value="1">1 - Poor</option>
    </select></label>
    <label>Review <textarea name="text" rows="5" required></textarea></label>
    <label>Photo (optional) <input type="file" name="image" accept="image/*" /></label>
    <button type="submit">Submit review</button>
  </form>

  <div class="msg" id="msg"></div>

  <script>
  document.getElementById('reviewForm').addEventListener('submit', async (e)=>{
    e.preventDefault();
    const form = e.target;
    const data = new FormData(form);
    document.getElementById('msg').innerText = 'Uploading...';
    try{
      const resp = await fetch('/api/submit-review', { method:'POST', body: data });
      const json = await resp.json();
      if(json.ok) {
        document.getElementById('msg').innerText = json.message;
        form.reset();
      } else {
        document.getElementById('msg').innerText = json.message || 'Error';
      }
    } catch(err){
      document.getElementById('msg').innerText = 'Network error';
    }
  });
  </script>
</body>
</html>
