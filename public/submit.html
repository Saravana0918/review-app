<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Submit Review</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <style>
    body{font-family:Arial,Helvetica,sans-serif;padding:20px;max-width:720px;margin:auto}
    label{display:block;margin-top:12px}
    input,textarea,select{width:100%;padding:8px;margin-top:6px;border:1px solid #ccc;border-radius:6px}
    button{margin-top:12px;padding:10px 16px;border:none;background:#0a6cff;color:#fff;border-radius:6px;cursor:pointer}
    .msg{margin-top:12px}
    /* === Reviews elegant card + carousel styles === */
#reviews-container { width:100%; box-sizing:border-box; }
.rp-section { max-width:1200px; margin:48px auto; padding:12px 20px; }
.rp-title { text-align:center; font-size:28px; font-weight:800; color:#111; margin-bottom:6px; }
.rp-sub { text-align:center; color:#666; margin-bottom:20px; font-size:14px; }

/* carousel wrapper */
.rp-carousel-wrap { position:relative; }
.rp-carousel-viewport { overflow-x:auto; -webkit-overflow-scrolling:touch; scroll-snap-type:x mandatory; padding-bottom:6px; }
.rp-grid { display:flex; gap:22px; align-items:stretch; padding:10px 6px; box-sizing:border-box; }

/* card style */
.rp-card {
  flex:0 0 320px;
  width:320px;
  scroll-snap-align:center;
  background:#fff;
  border-radius:18px;
  padding:18px;
  box-shadow:0 12px 34px rgba(13,20,30,0.06);
  border:1px solid rgba(20,25,30,0.03);
  display:flex;
  gap:12px;
  align-items:flex-start;
  transition:transform .22s ease;
  box-sizing:border-box;
  position:relative;
  overflow:visible;
}

/* decorative notch (angled corner) */
.rp-card:before{
  content:"";
  position:absolute;
  right:-6px;
  top:-6px;
  width:62px;
  height:62px;
  background:linear-gradient(135deg, rgba(255,255,255,0.6), rgba(250,245,255,0.6));
  border-radius:8px;
  transform:skew(-15deg) rotate(18deg);
  box-shadow: 0 2px 8px rgba(10,10,20,0.03);
  pointer-events:none;
}

/* avatar */
.rp-avatar { width:72px; height:72px; border-radius:12px; overflow:hidden; flex-shrink:0; background:#f6f7fb; display:block; box-shadow:0 6px 18px rgba(11,22,40,0.04); }
.rp-avatar img { width:100%; height:100%; object-fit:cover; display:block; }

/* body */
.rp-body { flex:1; min-width:0; display:flex; flex-direction:column; }
.rp-name-row { display:flex; align-items:center; justify-content:space-between; gap:8px; }
.rp-name { font-weight:700; font-size:15px; color:#111; }
.rp-loc { font-size:12px; color:#7a7a7a; margin-top:4px; }

/* stars inline */
.rp-stars { display:inline-flex; gap:4px; align-items:center; color:#f5b301; margin-left:6px; }

/* truncated text */
.rp-text { color:#333; font-size:14px; line-height:1.45; margin-top:8px; max-height:4.0em; overflow:hidden; }

/* CTA button */
.rp-cta { text-align:right; margin-top:12px; }
.rp-view { background:linear-gradient(90deg,#7b5cff,#a35bff); color:#fff; padding:8px 14px; border-radius:999px; border:0; cursor:pointer; font-weight:700; font-size:13px; }

/* arrows */
.rp-arrow { position:absolute; top:50%; transform:translateY(-50%); z-index:30; background:#fff;border:0; width:46px;height:46px;border-radius:999px;box-shadow:0 8px 28px rgba(11,22,40,0.08); cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:22px; }
.rp-left{ left:8px } .rp-right{ right:8px }

/* mobile */
@media (max-width:900px){
  .rp-card{ flex:0 0 86%; width:86%; }
  .rp-avatar{ width:60px; height:60px; }
  .rp-arrow{ display:none; }
}

  </style>
</head>
<body>
  <h2>Submit your Fan Review</h2>
  <p>Share a photo of your jersey and your review. Reviews are published after approval.</p>

  <form id="reviewForm" enctype="multipart/form-data">
    <label>Your name <input name="name" required /></label>
    <label>City (optional) <input name="city" /></label>
    <label>Rating <select name="rating">
      <option value="5">5 - Excellent</option>
      <option value="4">4 - Very good</option>
      <option value="3">3 - Good</option>
      <option value="2">2 - Fair</option>
      <option value="1">1 - Poor</option>
    </select></label>
    <label>Review <textarea name="text" rows="5" required></textarea></label>
    <label>Photo (optional) <input type="file" name="image" accept="image/*" /></label>
    <button type="submit">Submit review</button>
  </form>

  <div class="msg" id="msg"></div>

  <script>
  document.getElementById('reviewForm').addEventListener('submit', async (e)=>{
    e.preventDefault();
    const form = e.target;
    const data = new FormData(form);
    document.getElementById('msg').innerText = 'Uploading...';
    try{
      const resp = await fetch('/api/submit-review', { method:'POST', body: data });
      const json = await resp.json();
      if(json.ok) {
        document.getElementById('msg').innerText = json.message;
        form.reset();
      } else {
        document.getElementById('msg').innerText = json.message || 'Error';
      }
    } catch(err){
      document.getElementById('msg').innerText = 'Network error';
    }
  });
  </script>
</body>
</html>
